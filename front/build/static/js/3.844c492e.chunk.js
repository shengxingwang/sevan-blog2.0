(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{92:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var o=a(7),n=a(8),s=a(11),c=a(9),i=a(10),r=a(0),l=a.n(r),m=(a(92),a(16)),p=a(19),u=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={page:1,offset:30},a.reload=!0,a.page=1,a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidUpdate",value:function(){this.reload=!0;var e=document.getElementById("poemCard"),t=document.getElementById("poemCard").childNodes,a=[];t.forEach(function(t,o){var n=t.offsetHeight;if(o<3)a.push(n+20),t.style.top="20px",t.style.left=30*o+1.5*(o+1)+"%";else{var s=Math.min.apply(null,a),c=a.indexOf(s);t.style.top=a[c]+20+"px",t.style.left=30*c+1.5*(c+1)+"%",a[c]=a[c]+(n+20),e.style.height=a[c]+"px"}})}},{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getData",value:function(e){var t={action:"getCouldComment",page:this.page,offset:this.state.offset};this.props.getCommList(t,e)}},{key:"scrollLoad",value:function(e){var t=document.documentElement.offsetHeight||document.body.offsetHeight,a=e.target;a.scrollTop+t>=a.firstChild.offsetHeight-30&&this.props.commData.curPage<this.props.commData.totalPage&&this.reload&&(this.reload=!1,this.page=this.props.commData.curPage+1,this.getData())}},{key:"render",value:function(){var e=this.props.commData.commList.map(function(e,t){return l.a.createElement("div",{key:t,className:"item"},l.a.createElement("p",null,e.comment),l.a.createElement("p",{className:"bomm"},l.a.createElement("span",{className:"flag"},e.nickname+"\u2014\u2014"+e.ptime.split(" ")[0])))});return l.a.createElement("div",{onScroll:this.scrollLoad.bind(this),className:"shows-box rig-container"},l.a.createElement("div",{className:"poem-card",id:"poemCard"},e))}}]),t}(r.Component);t.default=Object(m.b)(function(e){return{commData:e.commData}},{getCommList:p.a})(u)}}]);
//# sourceMappingURL=3.844c492e.chunk.js.map